{"version":3,"sources":["webpack:///src/app/schedules/schedules.component.ts","webpack:///src/app/schedules/schedules.component.html","webpack:///src/app/timetable.service.ts","webpack:///src/app/copyright/copyright.component.ts","webpack:///src/app/copyright/copyright.component.html","webpack:///src/environments/environment.ts","webpack:///src/app/guards/auth-guard.service.ts","webpack:///src/app/landing/landing.component.ts","webpack:///src/app/landing/landing.component.html","webpack:///src/app/public-course-list/public-course-list.component.ts","webpack:///src/app/public-course-list/public-course-list.component.html","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/admin/admin.component.ts","webpack:///src/app/admin/admin.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/subjects/subjects.component.ts","webpack:///src/app/subjects/subjects.component.html","webpack:///src/app/firebase.service.ts","webpack:///src/app/guards/role-guard.service.ts","webpack:///src/app/login/login.component.html","webpack:///src/app/login/login.component.ts","webpack:///src/main.ts","webpack:///$_lazy_route_resource lazy namespace object"],"names":["classNum","SchedulesComponent","timetableService","firebaseService","fb","schedules","info","x","exist","dataItems","scheduleName","required","scheduleForm","schedule","description","visibility","scheduleBuilderForm","sub","courseCode","reviewForm","subject","course","review","updatePasswordForm","current","confirm","editForm","array","getToken","then","res","getPrivateSchedules","subscribe","data","name","user","forEach","e","push","sName","num","numCourses","vis","show","access","isAdmin","localStorage","setItem","sched","controls","value","desc","createSchedule","alert","window","location","reload","updateSchedule","nameToUpdate","viewSchedule","courses","courseInfo","showSB","deleteOne","message","sb","toUpperCase","cc","getTimetableInfo","undefined","find","i","j","filter","sch","saveSchedule","setControl","setExistingItems","items","formArray","s","group","writeReview","oldPwd","newPwd","confirmPwd","length","changePassword","submitReview","updatePassword","selector","templateUrl","styleUrls","TimetableService","http","SCHED_URL","REVIEW_URL","POLICY_URL","get","pipe","handleError","key","email","post","token","headers","oldName","put","c","r","v","status","policy","text","result","error","providedIn","CopyrightComponent","viewAllPolicies","sp","dmca","aup","environment","production","AuthGuardService","router","route","state","isLoggedIn","navigate","LandingComponent","PublicCourseListComponent","courseLists","getPublicSchedules","el","lastModified","courseIDList","courseList","join","sort","a","b","Date","getTime","showDetails","AppComponent","title","AdminComponent","activeUsers","adminUsers","deactivatedUsers","reviews","options","dmcaForm","accountStatus","getReviews","p","courseID","reviewBody","reviewVisibility","changeAccountSettings","updatePolicy","viewPolicy","editPolicy","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","AppModule","initializeApp","forRoot","path","component","canActivate","declarations","imports","providers","bootstrap","SubjectsComponent","timetableInfo","showReview","subjectsForm","keyword","cs","getKeywordInfo","cID","timePosted","console","log","search","FirebaseService","afAuth","isVerified","getItem","password","signInWithEmailAndPassword","JSON","stringify","err","Promise","resolve","reject","createUserWithEmailAndPassword","provider","auth","GoogleAuthProvider","addScope","signInWithPopup","signOut","removeItem","rej","onAuthStateChanged","getIdToken","id","pwd","emailVerified","sendEmailVerification","signin","currentUser","reauthenticate","currentPwd","cred","EmailAuthProvider","credential","reauthenticateWithCredential","RoleGuardService","next","LoginComponent","loginForm","n","trySignUp","em","verifyLogin","loginWithGoogle","register","signup","signUp","signIn","toggleLogin","googleLogin","bootstrapModule","webpackEmptyAsyncContext","req","Error","code","keys","module","exports"],"mappings":"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","file":"main-es5.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormGroup, FormControl, FormBuilder, Validators, FormArray } from '@angular/forms';\nimport { TimetableService } from '../timetable.service';\nimport { FirebaseService } from '../firebase.service';\n\n@Component({\n  selector: 'app-schedules',\n  templateUrl: './schedules.component.html',\n  styleUrls: ['./schedules.component.css']\n})\n\nexport class SchedulesComponent implements OnInit {\n  // Global variables\n  public schedules = [];\n  public info = [];\n  public x = [];\n  public exist = [];\n  public dataItems = [];\n  public show: boolean;\n  public showSB: boolean;\n  public nameToUpdate;\n  public name: string;\n\n  // Form inputs\n  scheduleName = new FormControl('',[\n    Validators.required\n  ])\n\n  scheduleForm = new FormGroup({\n    schedule: new FormControl('',[\n      Validators.required\n    ]),\n    description: new FormControl(''),\n    visibility: new FormControl('')\n  });\n\n  scheduleBuilderForm = new FormGroup({\n    sub: new FormControl('',[\n      Validators.required\n    ]),\n    courseCode: new FormControl('',[\n      Validators.required\n    ]),\n  });\n\n  reviewForm = new FormGroup({\n    subject: new FormControl('',[\n      Validators.required\n    ]),\n    course: new FormControl('',[\n      Validators.required\n    ]),\n    review: new FormControl('',[\n      Validators.required\n    ]),\n  });\n\n  updatePasswordForm = new FormGroup({\n    current: new FormControl('',[\n      Validators.required\n    ]),\n    new: new FormControl('',[\n      Validators.required\n    ]),\n    confirm: new FormControl('',[\n      Validators.required\n    ]),\n  });\n\n  editForm =  new FormGroup({\n    dataItems: this.fb.array([])\n  });\n\n  constructor(private timetableService: TimetableService, private firebaseService: FirebaseService, private fb: FormBuilder) { }\n\n  ngOnInit(): void {\n    this.firebaseService.getToken().then(res => {\n      // Check if user is logged in\n      if(res) {\n        this.timetableService.getPrivateSchedules(res)\n        .subscribe(data => {\n          // Extract name of user\n          this.name = data[0].user;\n          // Push schedules into array to display\n          data[0].schedules.forEach(e=> {\n            this.schedules.push({\n              sName: e.scheduleName,\n              num: e.numCourses,\n              vis: e.visibility,\n              show: false,\n            })\n          })\n          // Check if user has admin access\n          if(data[0].access === \"admin\") {\n            this.firebaseService.isAdmin = true;\n            localStorage.setItem('admin','yes')\n          }\n        });\n      }\n    })\n  }\n\n  // Create a new schedule\n  createSchedule() {\n     // Extract input values\n    const sched = this.scheduleForm.controls.schedule.value\n    const desc = this.scheduleForm.controls.description.value\n    let vis = this.scheduleForm.controls.visibility.value\n\n    // Set blank to false (visibility)\n    if (vis == '')\n      vis = \"false\"\n\n    this.firebaseService.getToken().then(res => {\n      // Check if user is logged in\n      if(res) {\n        this.timetableService.createSchedule(res,sched,desc,vis).subscribe(data => {\n          if (data) {\n            alert(`A schedule with the name \"${sched}\" was created`)\n            window.location.reload();\n          }\n        })\n      }\n    })\n  }\n\n  updateSchedule() {\n     // Extract input values\n    const sched = this.editForm.controls.dataItems.value[0].schedule\n    const desc = this.editForm.controls.dataItems.value[0].description\n    let vis = this.editForm.controls.dataItems.value[0].visibility\n\n    // Enforce mandatory field\n    if(sched == '') {\n      alert('Please enter a schedule name')\n    }\n    else {\n      this.firebaseService.getToken().then(res => {\n        // Check if user is logged in\n        if(res) {\n          this.timetableService.updateSchedule(res,sched,desc,vis,this.nameToUpdate).subscribe(data => {\n            alert('Update successful')\n            window.location.reload();\n          })\n        }\n      })\n    }\n  }\n\n  // Get the list of subject code, course code pairs for a given schedule\n  viewSchedule(schedule: string) {\n    this.x = [];\n\n    this.firebaseService.getToken().then(res => {\n      // Check if user is logged in\n      if(res) {\n        // Add to arrays\n        this.timetableService.viewSchedule(res,schedule).subscribe(data => {\n          data[0].schedules[0].courses.forEach(e=> {\n            this.exist.push(e.courseInfo[0].classNum)\n            this.x.push(e)\n          });\n          this.showSB = true;\n        });\n      }\n    })\n  }\n\n  // Delete a schedule with a given name\n  deleteOne(schedule: string) {\n    if(confirm(`Are you sure you want to delete the schedule \"${schedule}\"?`)) {\n      this.firebaseService.getToken().then(res => {\n        // Check if user is logged in\n        if(res) {\n          this.timetableService.deleteOne(res,schedule).subscribe(data => {\n            alert(data.message);\n            window.location.reload()\n          });\n        }\n      })\n    }\n  }\n\n  // Add course to schedule builder\n  addCourse() {\n    // Extract input values\n    const sb = this.scheduleBuilderForm.controls.sub.value.toUpperCase()\n    const cc = this.scheduleBuilderForm.controls.courseCode.value.toUpperCase()\n\n    this.timetableService.getTimetableInfo(sb,cc).subscribe( data => {\n      this.info = data;\n      // If subject+course combo exists\n      if (data != undefined) { \n        // Course does not already exists in draft\n        if (!this.exist.find(e => e == this.info[0].classNum)) {\n          this.x.push({\"subject\": sb, \"course\": cc, \"courseInfo\": this.info});\n          this.exist.push(this.info[0].classNum);\n        }\n        // Course exists\n        else {\n          alert('Cannot add duplicate courses!')\n        }\n      }\n    })\n    \n  }\n\n  // Delete course in schedule builder\n  deleteCourse(i: string, j: string) : void {\n    this.x = this.x.filter(e => e !== i);\n    this.exist = this.exist.filter(e => e !== j)\n  }\n\n  // Save a list of subject code, course code pairs under a given schedule name\n  saveSchedule() {\n    // Extract input values\n    const sch = this.scheduleName.value\n\n    this.firebaseService.getToken().then(res => {\n      // Check if user is logged in\n      if(res) {\n        this.timetableService.saveSchedule(res,sch,this.x).subscribe(data => {\n          alert(`Schedule ${sch} has been built`)\n          window.location.reload()\n        })\n      }\n    })\n  }\n\n  edit(schedule: string, show: boolean) {\n    let vis;\n    show = !show;\n    this.show = true;\n    this.nameToUpdate = schedule;\n\n    this.firebaseService.getToken().then(res => {\n      // Check if user is logged in\n      if(res) {\n        this.timetableService.viewSchedule(res,schedule).subscribe(data => {\n          // Set visibility flag\n          if (data[0].schedules[0].visibility == \"false\") {\n            vis = false;\n          }\n          else {\n            vis = true;\n          }\n          // Set data items to stored values\n          this.dataItems = [\n            {\n              schedule: data[0].schedules[0].scheduleName,\n              description: data[0].schedules[0].description,\n              visibility: vis,\n            }\n          ];\n          // Create new form group on editForm\n          this.editForm = new FormGroup({\n            dataItems: this.fb.array([])\n          });\n          // Add controls that assigns dataItems\n          this.editForm.setControl(\n            \"dataItems\",\n            this.setExistingItems(this.dataItems)\n          );\n          });\n      }\n    })\n  }\n\n  // Close edit modal\n  close() {\n    this.show = false;\n  }\n\n  // Push values to formArray\n  setExistingItems(items): FormArray {\n    const formArray = new FormArray([]);\n    items.forEach(s => {\n      formArray.push(\n        this.fb.group({\n          schedule: s.schedule,\n          description: s.description,\n          visibility: s.visibility,\n        })\n      );\n    });\n    return formArray;\n  }\n\n  submitReview() {\n    // Extract input values\n    const sb = this.reviewForm.controls.subject.value.toUpperCase()\n    const cc = this.reviewForm.controls.course.value.toUpperCase()\n    const review = this.reviewForm.controls.review.value\n\n    if(confirm(`Are you sure you want to post this review to ${sb} ${cc}?`)) {\n      this.firebaseService.getToken().then(res => {\n        // Check if user is logged in\n        if(res) {\n          this.timetableService.writeReview(res,sb,cc,review).subscribe(data => {\n            if (data) {\n              alert('Review posted!')\n              window.location.reload()\n            }\n          })\n        }\n      })\n    }\n  }\n\n  updatePassword() {\n     // Extract input values\n    let oldPwd = this.updatePasswordForm.controls.current.value\n    let newPwd = this.updatePasswordForm.controls.new.value\n    let confirmPwd = this.updatePasswordForm.controls.confirm.value\n\n    // Error if password less than 6 characters\n    if (newPwd.length < 6) {\n      alert(\"Password must be at least 6 characters long\")\n    }\n    // Error if passwords don't match\n    else if(newPwd != confirmPwd) {\n      alert(\"Confirm password does not match\")\n    }\n    // Change password\n    else {\n      this.firebaseService.changePassword(oldPwd,newPwd)\n    }\n  }\n\n}\n","<h2>Hi there, {{name}}</h2>\n<div class=\"left\">\n  <div class=\"schedules\">\n    <h3>Create a Schedule</h3>\n    <form [formGroup]=\"scheduleForm\">\n      <label>Name:</label>\n      <input formControlName=\"schedule\" name=\"schedule\" type=\"text\" />\n      <label>Description (optional):</label>\n      <input formControlName=\"description\" name=\"description\" type=\"text\" />\n      <label>Public?</label>\n      <input formControlName=\"visibility\" name=\"visibility\" type=\"checkbox\" />\n      <button (click)=\"createSchedule()\" [disabled]=\"!scheduleForm.valid\">Create</button>\n      <div *ngIf=\"scheduleForm.invalid && (scheduleForm.dirty || scheduleForm.touched)\">\n        <p *ngIf=\"scheduleForm.controls.schedule.errors?.required\">\n          Please enter a schedule name.\n        </p>\n      </div>\n    </form>\n  </div>\n  <div class=\"schedule-builder\">\n    <button class=\"save\" [class.disabled]=\"x.length == 0\" [disabled]=\"x.length == 0\" (click)=\"saveSchedule()\" *ngIf=\"showSB\">Save</button>\n    <h3>Build a Schedule</h3>\n    <form>\n      <label>Name:</label>\n      <input [formControl]=\"scheduleName\" name=\"schedule\" type=\"text\" />\n      <button (click)=\"viewSchedule(scheduleName.value)\" [disabled]=\"!scheduleName.valid\">View</button>\n    </form>\n    <div *ngIf=\"showSB\">\n      <h4>Edit Schedule</h4>\n      <form [formGroup]=\"scheduleBuilderForm\">\n        <label>Subject:</label>\n        <input formControlName=\"sub\" name=\"sub\" type=\"text\" />\n        <label>Course Code:</label>\n        <input formControlName=\"courseCode\" name=\"courseCode\" type=\"text\" />\n        <button (click)=\"addCourse()\" [disabled]=\"!scheduleBuilderForm.valid\">Add Course</button>\n        <div *ngIf=\"scheduleBuilderForm.invalid && (scheduleBuilderForm.dirty || scheduleBuilderForm.touched)\">\n            <p *ngIf=\"scheduleBuilderForm.controls.sub.errors?.required || scheduleBuilderForm.controls.courseCode.errors?.required\">\n              Please fill in all fields.\n            </p>\n          </div>\n    </form>\n    <ul id=\"builder-output\">\n        <li *ngFor=\"let i of x\">\n            {{i.subject}} {{i.course}} {{i.courseInfo[0].component}} {{i.courseInfo[0].section}}: {{i.courseInfo[0].days}} {{i.courseInfo[0].start}}-{{i.courseInfo[0].end}} ({{i.courseInfo[0].room}})\n            <button class=\"delete\" (click)=\"deleteCourse(i,i.courseInfo[0].classNum)\">x</button>\n          </li>\n    </ul>\n    </div>\n  </div>\n</div>\n\n<div class=\"right\">\n  <div class=\"schedule-list\">\n    <h3>My Schedules</h3>\n    <ul>\n      <li *ngFor=\"let schedule of schedules\">\n        <img [src]=\"schedule.vis == 'true' ? '../../assets/public.svg' : '../../assets/private.svg' \">\n        {{schedule.sName}} ({{schedule.num}} courses)\n        <button class=\"details\" (click)=\"edit(schedule.sName, schedule.show)\">Edit</button>\n        <button class=\"details\" (click)=\"deleteOne(schedule.sName)\">Delete</button>\n      </li>\n    </ul>\n    <div *ngIf=\"show\" class=\"edit-schedule\">\n      <button class=\"delete position\" (click)=\"close()\">x</button>\n      <form [formGroup]=\"editForm\">\n        <div formArrayName=\"dataItems\" *ngFor=\"let emp of editForm.get('dataItems').controls; let i = index\">\n          <div [formGroupName]=\"i\">\n            <label>Name:</label>\n            <br>\n            <input formControlName=\"schedule\" name=\"schedule\" type=\"text\" class=\"input-edit\"/>\n            <br>\n            <label>Description (optional):</label>\n            <input formControlName=\"description\" name=\"description\" type=\"text\" class=\"input-edit\"/>\n            <br>\n            <label>Public?</label>\n            <input formControlName=\"visibility\" name=\"visibility\" type=\"checkbox\">\n            <button class=\"create\" (click)=\"updateSchedule()\">Update</button>\n          </div>\n        </div>\n      </form>\n    </div>\n  </div>\n  <div class=\"reviews\">\n    <h3>Write a Review</h3>\n    <form [formGroup]=\"reviewForm\">\n      <label>Subject:</label>\n\n      <input class=\"input-edit\" formControlName=\"subject\" name=\"subject\" type=\"text\" />\n      <br>\n      <label>Course Code:</label>\n      <input class=\"input-edit\" formControlName=\"course\" name=\"course\" type=\"text\" >\n      <br>\n      <label>Review:</label>\n      <br>\n      <textarea class=\"input-edit\" rows=\"5\" formControlName=\"review\" name=\"review\" type=\"text\"></textarea>\n      <br>\n      <button (click)=\"submitReview()\" [disabled]=\"!reviewForm.valid\">Submit</button>\n      <div *ngIf=\"reviewForm.invalid && (reviewForm.dirty || reviewForm.touched)\">\n        <p *ngIf=\"reviewForm.controls.subject.errors?.required || reviewForm.controls.course.errors?.required || reviewForm.controls.review.errors?.required\">\n          Please fill in all values.\n        </p>\n      </div>\n    </form>\n  </div>\n\n  <div class=\"password\">\n    <h3>Update Password</h3>\n    <form [formGroup]=\"updatePasswordForm\">\n      <label>Current Password:</label>\n      <input formControlName=\"current\" name=\"current\" type=\"password\" />\n      <br>\n      <label>New Password:</label>\n      <input formControlName=\"new\" name=\"new\" type=\"password\" />\n      <br>\n      <label>Confirm New Password:</label>\n      <input formControlName=\"confirm\" name=\"confirm\" type=\"password\" />\n      <br>\n      <button (click)=\"updatePassword()\" [disabled]=\"!updatePasswordForm.valid\">Update</button>\n      <div *ngIf=\"updatePasswordForm.invalid && (updatePasswordForm.dirty || updatePasswordForm.touched)\">\n        <p *ngIf=\"updatePasswordForm.controls.current.errors?.required || updatePasswordForm.controls.new.errors?.required || updatePasswordForm.controls.confirm.errors?.required\">\n          Please fill in all values.\n        </p>\n      </div>\n    </form>\n  </div>\n</div>\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, of } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TimetableService {\n  \n  constructor(private http: HttpClient) { }\n\n  // Define common routes\n  SCHED_URL = 'schedules'\n  REVIEW_URL = 'reviews'\n  POLICY_URL = 'policy'\n\n  // Get timetable entry for given subject code, course code and optional course component\n  getTimetableInfo(sub: string, course: string): Observable<any> {\n    return this.http.get(`/subjects/${sub}/${course}`).pipe(\n      catchError(this.handleError<any>())\n    )\n  }\n\n  // Keyword search\n  getKeywordInfo(key: string): Observable<any> {\n    return this.http.get(`/keyword/${key}`).pipe(\n      catchError(this.handleError<any>())\n    )\n  }\n\n  // Register new user\n  register(user: string, email: string): Observable<any>  {\n    return this.http.post<any>('/register',{\"user\": user, \"email\": email}).pipe(\n      catchError(this.handleError<any>())\n    )\n  }\n\n  // Write a review\n  writeReview(token: string, sub: string, course: string, review: string): Observable<any>  {\n    const headers = {'Authorization':'Bearer ' + token}\n    return this.http.post<any>(`/${this.REVIEW_URL}`,{\"subject\": sub, \"course\": course, \"review\": review},{headers}).pipe(\n      catchError(this.handleError<any>())\n    )\n  }\n\n  // Create a new schedule\n  createSchedule(token: string, schedule: string, description: string, visibility: boolean): Observable<any> {\n    const headers = {'Authorization':'Bearer ' + token}\n    return this.http.post<any>(`/${this.SCHED_URL}`,{\"scheduleName\": schedule, \"description\": description, \"visibility\": visibility},{headers}).pipe(\n      catchError(this.handleError<any>())\n    );\n  }\n\n  // Update name / description / visibility of a schedule\n  updateSchedule(token: string, schedule: string, description: string, visibility: boolean, oldName: string): Observable<any> {\n    const headers = {'Authorization':'Bearer ' + token}\n    return this.http.put<any>(`/${this.SCHED_URL}/${oldName}`,{\"scheduleName\": schedule, \"description\": description, \"visibility\": visibility},{headers}).pipe(\n      catchError(this.handleError<any>())\n    );\n  }\n\n  // Save a list of subject code, course code pairs under a given schedule name\n  saveSchedule(token: string, schedule: string, x: Array<{}>): Observable<any> {\n    const headers = {'Authorization':'Bearer ' + token}\n    return this.http.post(`/${this.SCHED_URL}/${schedule}`,{\"courseList\": x},{headers}).pipe(\n      catchError(this.handleError<any>())\n    );\n  }\n\n  // Get the list of subject code, course code pairs for a given schedule\n  viewSchedule(token: string, schedule: string): Observable<any> {\n    const headers = {'Authorization':'Bearer ' + token}\n    return this.http.get(`/${this.SCHED_URL}/${schedule}`,{headers}).pipe(\n      catchError(this.handleError<any>())\n    );\n  }\n\n  // Delete a schedule with a given name\n  deleteOne(token: string, schedule: string): Observable<any> {\n    const headers = {'Authorization':'Bearer ' + token}\n    return this.http.delete(`/${this.SCHED_URL}/${schedule}`,{headers}).pipe(\n      catchError(this.handleError<any>())\n    );\n  }\n\n  // View personal schedules\n  getPrivateSchedules(token: string): Observable<any> {\n    const headers = {'Authorization':'Bearer ' + token}\n    return this.http.get(`/${this.SCHED_URL}`,{headers}).pipe(\n      catchError(this.handleError<any>())\n    );\n  }\n\n  // Get a list of public schedule names and the number of courses that are saved in each schedule\n  getPublicSchedules(): Observable<any> {\n    return this.http.get('/publicschedules').pipe(\n      catchError(this.handleError<any>())\n    );\n  }\n\n  // List of reviews\n  getReviews(): Observable<any> {\n    return this.http.get(`/${this.REVIEW_URL}`).pipe(\n      catchError(this.handleError<any>())\n    );\n  }\n\n  // Toggle review visibility\n  reviewVisibility(token: string, c: string, r: string, v: string): Observable<any> {\n    const headers = {'Authorization':'Bearer ' + token}\n    return this.http.put(`/${this.REVIEW_URL}`,{\"courseID\": c, \"review\": r, \"visibility\": v},{headers}).pipe(\n      catchError(this.handleError<any>())\n    );\n  }\n\n  // Update account settings, such as access and status\n  changeAccountSettings(token: string, email: string, access: string, status: string): Observable<any> {\n    const headers = {'Authorization':'Bearer ' + token}\n    return this.http.put('/account',{\"email\": email, \"access\": access, \"status\": status},{headers}).pipe(\n      catchError(this.handleError<any>())\n    );\n  }\n\n  // Display single policy\n  viewPolicy(token: string, policy: string): Observable<any> {\n    const headers = {'Authorization':'Bearer ' + token}\n    return this.http.get(`/${this.POLICY_URL}/${policy}`,{headers}).pipe(\n      catchError(this.handleError<any>())\n    );\n  }\n\n  // Publicly display all policies\n  viewAllPolicies(): Observable<any> {\n    return this.http.get(`/${this.POLICY_URL}`).pipe(\n      catchError(this.handleError<any>())\n    );\n  }\n\n  // Update a policy\n  updatePolicy(token: string, policy: string, text: string): Observable<any> {\n    const headers = {'Authorization':'Bearer ' + token}\n    return this.http.put(`/${this.POLICY_URL}`,{\"policy\": policy, \"text\": text},{headers}).pipe(\n      catchError(this.handleError<any>())\n    );\n  }\n\n  // Handle failed HTTP operations\n  private handleError<T>(result?: T) {\n    return (error: any): Observable<T> => {\n      // Display error in alert\n      alert(error.error)\n  \n      // Let the app keep running by returning an empty result.\n      return of(result as T);\n    };\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { TimetableService } from '../timetable.service';\n\n@Component({\n  selector: 'app-copyright',\n  templateUrl: './copyright.component.html',\n  styleUrls: ['./copyright.component.css']\n})\nexport class CopyrightComponent implements OnInit {\n\n  // Global variables\n  public sp: string;\n  public dmca: string;\n  public aup: string\n\n  constructor(private timetableService: TimetableService) { }\n\n  ngOnInit(): void {\n    // Populate page\n    this.timetableService.viewAllPolicies().subscribe(data => {\n      data.forEach(e => {\n        if (e.name == \"Security and Privacy Policy\")\n          this.sp = e.text\n        else if (e.name == \"DMCA Notice and Takedown Policy\")\n          this.dmca = e.text\n        else\n          this.aup = e.text\n      })\n    })\n  }\n\n}\n","<div class=\"copyright\">\n    <h2>Security and Privacy Policy</h2>\n    {{sp}}\n    <h2>DMCA Notice and Takedown Policy</h2>\n    {{dmca}}\n    <h2>Acceptable Use Policy</h2>\n    {{aup}}\n</div>\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot } from '@angular/router';\nimport { FirebaseService } from '../firebase.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthGuardService implements CanActivate {\n\n  constructor(private firebaseService: FirebaseService, private router: Router) { }\n\n\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\n    if (this.firebaseService.isLoggedIn) { // If user is logged in, return true\n      return true;\n    } else { // Otherwise, route to login page\n      this.router.navigate(['/login']);\n      return false;\n    }\n  }\n\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-landing',\n  templateUrl: './landing.component.html',\n  styleUrls: ['./landing.component.css']\n})\nexport class LandingComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<p class=\"about\">Welcome to Western's timetable application. This website allows you to view and search courses you are interested in taking, and save them to your own personalized schedule. Feel free to browse the course offerings for the 2020-2021 school year; however, to save schedules, you must create an account.</p>\n<img src=\"../../assets/uwo.jpg\">\n","import { Component, OnInit } from '@angular/core';\nimport { TimetableService } from '../timetable.service';\n\n@Component({\n  selector: 'app-public-course-list',\n  templateUrl: './public-course-list.component.html',\n  styleUrls: ['./public-course-list.component.css']\n})\nexport class PublicCourseListComponent implements OnInit {\n  public courseLists = [];\n  constructor(private timetableService: TimetableService) { }\n\n  ngOnInit(): void {\n    this.timetableService.getPublicSchedules().subscribe(data => {\n      data.forEach(e => {\n        e.schedules.forEach(el => {\n          if (el.visibility == 'true') {\n            this.courseLists.push({\n              user: e.user,\n              lastModified: el.lastModified,\n              sName: el.scheduleName,\n              num: el.numCourses,\n              desc: el.description,\n              courseIDList: el.courseList.join(', '),\n              courses: el.courses\n            })\n          }\n        })\n      })\n      this.courseLists.sort((a,b) => new Date(b.lastModified).getTime() - new Date(a.lastModified).getTime())\n    })\n  }\n\n  viewDetails(x) {\n    x.show = !x.show;\n  }\n\n  expand(x) {\n    x.showDetails = !x.showDetails;\n  }\n}","<div class=\"public-course-list\">\n    <h3>Public Course List</h3>\n    <ul>\n        <li class=\"main\" *ngFor=\"let x of courseLists | slice:0:10\">\n            <span class=\"bold\">User: {{x.user}} <span class=\"italic\">(Last Modified: {{x.lastModified}})</span></span>\n            <button class=\"details\" (click)=\"viewDetails(x)\">Details</button>\n            <br>\n            Schedule Name: {{x.sName}} ({{x.num}} courses)\n            <div *ngIf=\"x.show\">\n              <div class=\"classDetail\">Description: {{x.desc}}</div>\n                  Course IDs: {{x.courseIDList}}\n                  <button class=\"details\" (click)=\"expand(x)\">Expand</button>\n                  <div *ngIf=\"x.showDetails\">\n                    <ul>\n                      <li *ngFor=\"let y of x.courses\">\n                        {{y.subject}} {{y.course}} {{y.courseInfo[0].component}} {{y.courseInfo[0].section}}: {{y.courseInfo[0].days}} {{y.courseInfo[0].start}}-{{y.courseInfo[0].end}} {{y.courseInfo[0].room}}\n                      </li>\n                    </ul>\n                  </div>\n            </div>\n          </li>\n    </ul>\n  </div>  ","import { Component } from '@angular/core';\nimport { FirebaseService } from './firebase.service';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  title = 'Western Timetable';\n\n  constructor(public firebaseService: FirebaseService) {}\n}\n","<nav>\n  <a routerLink=\"/\" routerLinkActive=\"active-link\" [routerLinkActiveOptions]=\"{exact:\n    true}\">Home</a>\n  <a routerLink=\"/public\" routerLinkActive=\"active-link\">Public Course List</a>\n  <a routerLink=\"/search\" routerLinkActive=\"active-link\">Search</a>\n  <a routerLink=\"/schedule\" *ngIf=\"firebaseService.isLoggedIn\" routerLinkActive=\"active-link\">Draft My Schedule</a>\n  <a routerLink=\"/admin\" *ngIf=\"firebaseService.isAdmin\" routerLinkActive=\"active-link\">Admin Panel</a>\n  <a routerLink=\"/login\" *ngIf=\"!firebaseService.isLoggedIn\" routerLinkActive=\"active-link\">Login</a>\n  <a routerLink=\"/login\" *ngIf=\"firebaseService.isLoggedIn\" (click)=\"firebaseService.signout()\" routerLinkActive=\"active-link\">Logout</a>\n</nav>\n  <h1>{{title}}</h1>\n  <router-outlet></router-outlet>\n  <a class=\"footer\" routerLink=\"/copyright\">Copyright  2020</a>","import { Component, OnInit } from '@angular/core';\nimport { TimetableService } from '../timetable.service';\nimport { FormGroup, FormControl, FormBuilder, FormArray } from '@angular/forms';\nimport { FirebaseService } from '../firebase.service';\n\n@Component({\n  selector: 'app-admin',\n  templateUrl: './admin.component.html',\n  styleUrls: ['./admin.component.css']\n})\nexport class AdminComponent implements OnInit {\n  // Global variables\n  public activeUsers = []\n  public adminUsers = []\n  public deactivatedUsers = []\n  public reviews = []\n  public show: boolean;\n\n  editForm =  new FormGroup({\n    dataItems: this.fb.array([])\n  });\n  public dataItems = [];\n\n  // Array to populate select options\n  options = [\n    {desc: 'Security and Privacy Policy'},\n    {desc: 'DMCA Notice and Takedown Policy'},\n    {desc: 'Acceptable Use Policy'}\n  ]\n\n  constructor(private timetableService: TimetableService, private firebaseService: FirebaseService, private fb: FormBuilder) { }\n\n  // Form input\n  dmcaForm = new FormGroup({\n    policy: new FormControl(''),\n  });\n\n  ngOnInit(): void {\n    this.firebaseService.getToken().then(res => {\n      // Check if user is logged in\n      if(res) {\n        // Filter each user by type: active/deactivated, regular/admin and push to respective array\n        this.timetableService.getPublicSchedules().subscribe(data => {\n          data.forEach(e => {\n            if (e.accountStatus == \"active\") {\n              if (e.access == \"regular\") {\n                this.activeUsers.push(e)\n              } \n              else {\n                this.adminUsers.push(e)\n              }\n            }\n            else {\n              this.deactivatedUsers.push(e)\n            }\n          })\n        })\n        // Push reviews into array to display\n        this.timetableService.getReviews().subscribe(data => {\n          data.forEach(e => {\n            e.reviews.forEach(p => {\n              this.reviews.push({\n                course: e.courseID,\n                vis: p.visibility,\n                text: p.review\n              })\n            })\n          })\n        })\n      }\n    })\n  }\n\n  toggleVisibility(courseID: string, reviewBody: string, vis : string) {\n    // Toggle visibility\n    if (vis == \"hidden\")\n      vis = \"public\"\n    else \n      vis = \"hidden\"\n    this.firebaseService.getToken().then(res => {\n      // Check if user is logged in\n      if(res) {\n        this.timetableService.reviewVisibility(res, courseID, reviewBody, vis).subscribe(data => {\n          alert(`Review visibility for ${courseID} was changed to ${vis}`)\n          window.location.reload();\n        })\n      }\n    })\n  }\n\n  adminAccess(email: string, access: string, status: string) {\n    // Toggle admin access\n    if (access == \"admin\")\n      access = \"regular\"\n    else\n      access = \"admin\"\n\n    this.firebaseService.getToken().then(res => {\n      // Check if user is logged in\n      if(res) {\n        this.timetableService.changeAccountSettings(res, email,access,status).subscribe(data => {\n          alert(`Access priviledges for ${email} were changed to ${access}`)\n          window.location.reload();\n        })\n      }\n    })\n  }\n\n  accountStatus(email: string, access: string, status: string) {\n    // Toggle account status\n    if (status == \"active\")\n      status = \"deactivated\"\n    else\n      status = \"active\"\n    this.firebaseService.getToken().then(res => {\n      // Chekc if user is logged in\n      if(res) {\n        this.timetableService.changeAccountSettings(res,email,access,status).subscribe(data => {\n          alert(`Account status for ${email} was changed to ${status}`)\n          window.location.reload();\n        })\n      }\n    })\n  }\n\n  submitPolicy() {\n    // Extract input values\n    const policy = this.dmcaForm.controls.policy.value\n    const text = this.editForm.controls.dataItems.value[0].text\n    \n    this.firebaseService.getToken().then(res => {\n      // Check if user is logged in\n      if(res) {\n        this.timetableService.updatePolicy(res,policy,text).subscribe(data => {\n          alert('Policy published!')\n          window.location.reload();\n        })\n      }\n    })\n  }\n\n  editPolicy(policy: string) {\n    this.show = true;\n\n    this.firebaseService.getToken().then(res => {\n      // Check if user is logged in\n      if(res) {\n        this.timetableService.viewPolicy(res,policy).subscribe(data => {\n          // If there is existing policy \n          if (data!=0) {\n            // Set data items to stored text\n            this.dataItems = [\n              { text: data[0].text,}\n            ];\n          }\n          // If the policy does not exist in database\n          else {\n            this.dataItems = [\n              { text: ''}\n            ];\n          }\n          // Create new form group on editForm\n          this.editForm = new FormGroup({\n            dataItems: this.fb.array([])\n          });\n          // Add controls that assigns dataItems\n          this.editForm.setControl(\n            \"dataItems\",\n            this.setExistingItems(this.dataItems)\n          );\n        });\n      }\n    })\n  }\n\n  // Push values to formArray\n  setExistingItems(items): FormArray {\n    const formArray = new FormArray([]);\n    items.forEach(s => {\n      formArray.push(\n        this.fb.group({\n          text: s.text,\n        })\n      );\n    });\n    return formArray;\n  }\n\n}\n","<div class=\"left\">\n    <div class=\"user\">\n        <h3>Active Users (Regular)</h3>\n        <ul>\n            <li *ngFor=\"let user of activeUsers\">\n              {{user.user}} ({{user.email}})\n              <button class=\"details\" (click)=\"adminAccess(user.email,user.access,user.accountStatus)\">Grant Admin</button>\n              <button class=\"details\" (click)=\"accountStatus(user.email,user.access,user.accountStatus)\">Deactivate</button>\n            </li>\n          </ul>\n      </div>\n      <div class=\"admin\">\n        <h3>Active Users (Admin)</h3>\n        <ul>\n            <li *ngFor=\"let user of adminUsers\">\n              {{user.user}} ({{user.email}})\n              <button class=\"details\" (click)=\"adminAccess(user.email,user.access,user.accountStatus)\">Revoke Admin</button>\n              <button class=\"details\" (click)=\"accountStatus(user.email,user.access,user.accountStatus)\">Deactivate</button>\n            </li>\n          </ul>\n      </div>\n      <div class=\"deactivated\">\n        <h3>Deactivated Users</h3>\n        <ul>\n            <li *ngFor=\"let user of deactivatedUsers\">\n              {{user.user}} ({{user.email}})\n              <button class=\"details\" (click)=\"accountStatus(user.email,user.access,user.accountStatus)\">Reactivate</button>\n            </li>\n          </ul>\n      </div>\n      <div class=\"review\">\n        <h3>Reviews</h3>\n        <ul>\n            <li *ngFor=\"let review of reviews\">\n                <span class=\"bold\">\n                    <img [src]=\"review.vis == 'hidden' ? '../../assets/invisible.svg' : '../../assets/visible.svg'\">\n                    {{review.course}}</span>\n                    <button class=\"details\" (click)=\"toggleVisibility(review.course,review.text,review.vis)\">{{review.vis == \"hidden\" ? 'Show' : 'Hide'}}</button>\n                    <br>\n                    {{review.text}}           \n            </li>\n          </ul>\n      </div>\n</div>\n\n<div class=\"right\">\n<div class=\"dmca\">\n  <h3>Site Copyright Enforcement</h3>\n  <form [formGroup]=\"dmcaForm\">\n    <label>Select Policy:</label>\n    <select formControlName=\"policy\" #t (change)=\"editPolicy(t.value)\">\n      <option disabled value=\"\"> -- Select an Option -- </option>\n      <option *ngFor=\"let o of options\" [value]=\"o.desc\">\n        {{o.desc}}\n      </option>\n    </select>\n    <br>\n    <br>\n    <span *ngIf=\"show\">\n      <form [formGroup]=\"editForm\">\n        <div formArrayName=\"dataItems\" *ngFor=\"let emp of editForm.get('dataItems').controls; let i = index\">\n          <div [formGroupName]=\"i\">\n        <textarea class=\"input-edit\" formControlName=\"text\" rows=\"40\" ></textarea>\n        </div></div>\n      </form>\n      <button (click)=\"submitPolicy()\" [disabled]=\"!dmcaForm.controls.policy.touched\">Submit</button>\n    </span>\n  </form>\n</div>\n</div>\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { HttpClientModule } from '@angular/common/http';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms'; \nimport { RouterModule } from '@angular/router';\nimport { AngularFireModule } from '@angular/fire'\n\nimport { AppComponent } from './app.component';\nimport { SubjectsComponent } from './subjects/subjects.component';\nimport { SchedulesComponent } from './schedules/schedules.component';\nimport { CommonModule } from '@angular/common';\nimport { LoginComponent } from './login/login.component';\nimport { FirebaseService } from './firebase.service';\nimport { PublicCourseListComponent } from './public-course-list/public-course-list.component';\nimport { LandingComponent } from './landing/landing.component';\nimport { AdminComponent } from './admin/admin.component';\nimport { CopyrightComponent } from './copyright/copyright.component';\nimport { AuthGuardService } from './guards/auth-guard.service';\nimport { RoleGuardService } from './guards/role-guard.service';\n\nconst config = {\n  apiKey: \"AIzaSyB72rXHZQusPEFcgpxSl6wMLzWTKxpAUqk\",\n  authDomain: \"se3316-lab5-a1775.firebaseapp.com\",\n  databaseURL: \"https://se3316-lab5-a1775.firebaseio.com\",\n  projectId: \"se3316-lab5-a1775\",\n  storageBucket: \"se3316-lab5-a1775.appspot.com\",\n  messagingSenderId: \"386528497172\",\n  appId: \"1:386528497172:web:49eac83ef0f13aa2e42101\"\n}\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    SubjectsComponent,\n    SchedulesComponent,\n    LoginComponent,\n    PublicCourseListComponent,\n    AdminComponent,\n    CopyrightComponent,\n  ],\n  imports: [\n    BrowserModule,\n    AngularFireModule.initializeApp(config),\n    RouterModule.forRoot([\n      {path: '', component: LandingComponent},\n      {path: 'login', component: LoginComponent},\n      {path: 'public', component: PublicCourseListComponent},\n      {path: 'search', component: SubjectsComponent},\n      {path: 'schedule', component: SchedulesComponent, canActivate: [AuthGuardService]},\n      {path: 'admin', component: AdminComponent, canActivate: [RoleGuardService]},\n      {path: 'copyright', component: CopyrightComponent},\n    ]),\n    FormsModule,\n    ReactiveFormsModule,\n    HttpClientModule,\n    CommonModule\n  ],\n  providers: [FirebaseService, AuthGuardService],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Component, OnInit} from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { TimetableService } from '../timetable.service';\n\n@Component({\n  selector: 'app-subjects',\n  templateUrl: './subjects.component.html',\n  styleUrls: ['./subjects.component.css']\n})\nexport class SubjectsComponent implements OnInit {\n  // Global variables\n  public timetableInfo = [];\n  public reviews = []\n  showReview = false;\n\n  // Form input\n  subjectsForm = new FormGroup({\n    subject: new FormControl(''),\n    course: new FormControl(''),\n    keyword: new FormControl('')\n  });\n\n  constructor(private timetableService: TimetableService) { }\n\n  ngOnInit(): void {\n  }\n\n  // Search the time table by subject, subject+course\n  search() {\n    // Extract input values\n    const s = this.subjectsForm.controls.subject.value.toUpperCase()\n    const cs = this.subjectsForm.controls.course.value.toUpperCase()\n    const key = this.subjectsForm.controls.keyword.value.toUpperCase()\n\n    if (s == '' && cs == '' && key == '') {\n      alert('Please enter values')\n    } \n    else if (s) { // Search by subject and optional course code component\n      this.timetableService.getTimetableInfo(s, cs).subscribe(data => this.timetableInfo = data)\n    }\n    else if (cs && !s) { // Search by course code only\n      this.timetableService.getTimetableInfo(cs, '').subscribe(data => this.timetableInfo = data)\n    }\n    else { // Search by keyword\n      this.timetableService.getKeywordInfo(key).subscribe(data => this.timetableInfo = data)\n    }\n  }\n\n  // Toggle details view\n  viewDetails(subject) {\n    subject.show = !subject.show;\n  }\n\n  viewReviews(subject,course) {\n    this.reviews = [];\n    this.showReview = true;\n    const cID = subject+' '+course;\n    this.timetableService.getReviews().subscribe(data => {\n      data.forEach(e => {\n        if (e.courseID == cID) {\n          e.reviews.forEach(r => {\n            if(r.visibility == \"public\")\n              this.reviews.push({\n                user: r.user,\n                timePosted: r.timePosted,\n                review: r.review\n              })\n          })\n        }\n      })\n    })\n    console.log(this.reviews)\n  }\n\n  closeReviews() {\n    this.showReview = false;\n  }\n\n}\n","<div class=\"subjects\">\n  <h3>Search</h3>\n  <form [formGroup]=\"subjectsForm\">\n    <label>Subject:</label>\n    <input formControlName=\"subject\" name=\"subject\" type=\"text\" />\n    <label>Course Code:</label>\n    <input formControlName=\"course\" name=\"course\" type=\"text\" />\n    <label>Keyword:</label>\n    <input formControlName=\"keyword\" name=\"keyword\" type=\"text\" />\n    <button (click)=\"search()\" [disabled]=\"!subjectsForm.valid\">Search</button>\n    <div *ngIf=\"subjectsForm.invalid && (subjectsForm.dirty || subjectsForm.touched)\">\n      <p *ngIf=\"subjectsForm.controls.subject.errors?.required\">\n        Please enter a subject.\n      </p>\n    </div>\n  </form>\n  <ul>\n    <div class=\"reviews\" *ngIf=\"showReview\">\n      <button class=\"close\" (click)=\"closeReviews()\">X</button>\n      <li *ngFor=\"let r of reviews\">\n        <span class=\"bold\">User: {{r.user}} <span class=\"italic\">(Posted: {{r.timePosted}})</span></span>\n        <br>\n        Review: {{r.review}}\n      </li>\n    </div>\n    <li *ngFor=\"let subject of timetableInfo\">\n      <span class=\"bold\">{{subject.subject}} {{subject.courseCode}} - {{subject.description}}</span>\n      <button class=\"details\" (click)=\"viewDetails(subject)\">Details</button>\n      <button class=\"details\" (click)=\"viewReviews(subject.subject,subject.courseCode)\">Reviews</button>\n      <br>\n      {{subject.component}} {{subject.section}}: {{subject.days}}\n      {{subject.start}}-{{subject.end}} {{subject.room}}\n      <div *ngIf=\"subject.show\">\n        <div class=\"classDetail\">\n          {{subject.fullDescription}}\n          <br>\n          {{subject.importantInfo}}\n          <br>\n          {{subject.enrollment}}\n        </div>\n      </div>\n    </li>\n  </ul>\n</div>","import { Injectable } from '@angular/core';\nimport {AngularFireAuth} from '@angular/fire/auth'\nimport { Observable, of } from 'rxjs';\nimport * as firebase from 'firebase/app'\nimport { Router } from '@angular/router';\nimport { TimetableService } from './timetable.service';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FirebaseService {\n  // Global variables\n  isAdmin = false;\n  isLoggedIn = false;\n  isVerified = false;\n  \n  // Initialize constructor to check if user is logged in and is admin\n  constructor(public afAuth : AngularFireAuth, private router: Router, public timetableService: TimetableService) { \n    if (localStorage.getItem('user'))\n      this.isLoggedIn = true\n    if (localStorage.getItem('admin'))\n      this.isAdmin = true\n  }\n  \n  // Sign in\n  async signin(email: string, password : string){\n    await this.afAuth.signInWithEmailAndPassword(email,password)\n    .then(res=>{\n      // Add to local storage and set global variable to true\n      this.isLoggedIn = true;\n      alert('Login successful')\n      localStorage.setItem('user',JSON.stringify(res.user))\n      this.router.navigate(['/schedule'])\n    }, err => alert(err.message))\n  }\n\n  // Sign up\n  signup(email: string, password : string){\n    return new Promise<any>((resolve, reject) => {\n      this.afAuth.createUserWithEmailAndPassword(email,password)\n      .then(res=>{\n        resolve(res)\n      }, err => alert(err.message))\n    })\n\n  }\n\n  // Third party login\n  async loginWithGoogle(){\n    const provider = new firebase.default.auth.GoogleAuthProvider();\n    provider.addScope('profile');\n    provider.addScope('email');\n    await this.afAuth.signInWithPopup(provider).then(res => {\n      this.isLoggedIn = true;\n      localStorage.setItem('user',JSON.stringify(res.user))\n    }, err => alert(err))\n  }\n\n  // Sign out\n  signout() {\n    this.afAuth.signOut().then(res => {\n      // Clear local storage and set global variable to false\n      this.isLoggedIn = false;\n      localStorage.removeItem('user')\n      localStorage.removeItem('admin')\n      alert('Successfully signed out!')\n      window.location.reload();\n    }).catch(err =>\n        console.log(err))\n  }\n\n  // Check if user is logged in through getting token\n  getToken() {\n    return new Promise<any>((res,rej) => {\n      this.afAuth.onAuthStateChanged(user => {\n        if(user) { // User exists\n          user.getIdToken(true).then(id => {\n            res(id);\n        }, err => rej(err))} \n        else { // No user\n          console.log('No user logged in')\n        }\n      })\n    })\n  }\n\n  verifyLogin(email: string, pwd: string) {\n    return new Promise<any>((resolve,reject) => {\n      firebase.default.auth().signInWithEmailAndPassword(email,pwd).then(res => {\n        const user = res.user;\n        this.isVerified = user.emailVerified;\n        if (!this.isVerified) {\n          if(confirm('Email has not been verified. Click OK to send another email')) {\n            this.afAuth.onAuthStateChanged(e => {\n              e.sendEmailVerification().then(() => {\n                alert(\"Verification email re-sent\")\n                window.location.reload();\n              }).catch(err => alert('Sending email failed'))\n            })\n          }\n          \n        } else {\n          localStorage.setItem('user',JSON.stringify(user));\n          this.isLoggedIn = true;\n          this.signin(email,pwd);\n        }\n      },err => alert(err))\n    })\n  }\n\n  // Update password through firebase function\n  updatePassword(pwd) {\n    return new Promise<any>((res,rej) => {\n      var user = firebase.default.auth().currentUser;\n      user.updatePassword(pwd).then(e => {\n        alert('Password has been updated')\n        window.location.reload()\n      }).catch(err => {\n        console.log(err)\n      })\n    })\n  }\n\n  // \n  async changePassword(oldPwd,newPwd) {\n    const user = firebase.default.auth().currentUser;\n    try {\n      // Check if user is logged in\n      await this.reauthenticate(oldPwd)\n      // Allow user to update password\n      await this.updatePassword(newPwd)\n    } catch {\n      alert('Current password invalid')\n    }\n  }\n  \n  // Check if user is logged in / has logged in recently\n  reauthenticate(currentPwd) {\n    const user = firebase.default.auth().currentUser;\n    const cred = firebase.default.auth.EmailAuthProvider.credential(user.email,currentPwd);\n    return user.reauthenticateWithCredential(cred);\n  }\n\n  private handleError<T>(result?: T) {\n      return (error: any): Observable<T> => {\n        // Display error in alert\n        alert(error.error)\n    \n        // Let the app keep running by returning an empty result.\n        return of(result as T);\n      };\n    }\n\n}","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot } from '@angular/router';\nimport { FirebaseService } from '../firebase.service';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RoleGuardService {\n\n  constructor(private firebaseService: FirebaseService, private router: Router) { }\n\n\n  canActivate(next: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\n    if (this.firebaseService.isAdmin) { // If user is admin, return true\n      return true;\n    } else { // Otherwise, reroute to schedule page\n      this.router.navigate(['/schedule']);\n      return false;\n    }\n  }\n}\n","<div class=\"login\">\n    <h3>{{show ? 'Sign Up' : 'Sign In'}}</h3>\n    <form [formGroup]=\"loginForm\">\n      <span *ngIf=\"show\">\n        <label>Name:</label>\n        <input formControlName=\"name\" name=\"name\" type=\"text\" />\n      </span>\n      <label>Email:</label>\n      <input formControlName=\"email\" name=\"email\" type=\"text\" />\n      <label>Password:</label>\n      <input formControlName=\"password\" name=\"password\" type=\"password\" />\n      <button (click)=\"show ? signUp() : signIn()\" [disabled]=\"!loginForm.valid\">{{show ? 'Sign Up' : 'Sign In'}}</button>\n    </form>\n    <p>{{show ? 'Already have an account? ' : 'Do not have an account? '}}<a (click)=\"toggleLogin()\">{{show ? 'Sign In' : 'Sign Up'}}</a></p>\n    <button (click)=\"googleLogin()\" class=\"loginBtn\">{{show ? 'Sign Up' : 'Sign In'}} with   <img src=\"../assets/google.png\"></button>\n  </div>  ","import { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { FirebaseService } from '../firebase.service';\nimport { TimetableService } from '../timetable.service';\nimport {Router} from '@angular/router';\nimport * as firebase from 'firebase/app'\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent implements OnInit {\n  // Global variable\n  show: boolean = false;\n\n  // Form input\n  loginForm = new FormGroup({\n    name: new FormControl(''),\n    email: new FormControl('',[\n      Validators.required\n    ]),\n    password: new FormControl('',[\n      Validators.required\n    ]),\n  });\n\n  constructor(public firebaseService : FirebaseService, public timetableService: TimetableService, private router: Router) {}\n  ngOnInit(){\n  }\n\n  async signUp(){\n    // Extract input values\n    const n = this.loginForm.controls.name.value;\n    const e = this.loginForm.controls.email.value;\n    const pwd = this.loginForm.controls.password.value;\n    \n    if(n == '') {\n      alert('Please enter a name')\n    }\n    else {\n      this.trySignUp(n,e,pwd)\n    }\n  }\n  async signIn(){\n    // Extract input values\n    const em = this.loginForm.controls.email.value;\n    const pwd = this.loginForm.controls.password.value;\n\n    await this.timetableService.getPublicSchedules().subscribe(data => {\n      data.forEach(e => {\n        // Do not allow deactivated users to log in\n        if (em == e.email && e.accountStatus == \"deactivated\") {\n          alert('Your account has been deactivated. Please contact admin@gmail.com to resolve this issue.')\n          window.location.reload()\n        }\n      })\n    })\n    \n    await this.firebaseService.verifyLogin(em,pwd)\n\n  }\n  \n  // Toggle login view UI\n  toggleLogin() {\n    this.show = !this.show;\n  }\n\n  googleLogin() {\n    this.firebaseService.loginWithGoogle().then(res => {\n      this.timetableService.register('Jenny','lijenny1999@gmail.com').subscribe()\n      // Redirect to schedule page\n      this.router.navigate(['/schedule'])\n    })\n  }\n\n  trySignUp(name,email,password) {\n    this.firebaseService.signup(email,password).then(res => {\n    this.timetableService.register(name,email).subscribe();\n\n      var user = firebase.default.auth().currentUser;\n      user.sendEmailVerification().then(e => {\n      alert('Verification email sent')\n      window.location.reload();\n      }).catch(err => alert(err))\n  })\n  }\n\n}\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"]}